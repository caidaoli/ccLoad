# ccLoad 环境配置示例文件
# 复制此文件为 .env 并根据需要修改配置值

# ========================================
# 核心配置（必需）
# ========================================

# 管理后台密码（必需，未设置将导致程序退出）
CCLOAD_PASS=your_strong_password_here

# API 访问令牌通过 Web 管理界面动态配置
# 访问 http://localhost:8080/web/tokens.html 进行令牌管理

# ========================================
# 数据库配置
# ========================================

# SQLite 数据库路径（可选，默认: data/ccload.db）
SQLITE_PATH=./data/ccload.db

# SQLite Journal 模式（可选，默认: WAL）
# 可选值: WAL | DELETE | TRUNCATE | PERSIST | MEMORY | OFF
# - WAL（默认）：Write-Ahead Logging，高性能，适合本地文件系统
# - TRUNCATE：传统回滚日志，适合 Docker/K8s 环境或网络存储（NFS等）
# - DELETE：与 TRUNCATE 类似，但删除日志文件而非截断
# ⚠️ 容器环境建议：SQLITE_JOURNAL_MODE=TRUNCATE（避免WAL文件损坏风险）
# SQLITE_JOURNAL_MODE=WAL

# ========================================
# 网络配置
# ========================================

# HTTP 服务端口（可选，默认: 8080）
PORT=8080

# ========================================
# 性能优化配置
# ========================================

# 最大并发请求数（可选，默认: 1000）
# 限制同时处理的代理请求数量，防止goroutine爆炸
# CCLOAD_MAX_CONCURRENCY=1000

# 请求体最大字节数（可选，默认: 2097152，即 2MB）
# 限制单个API请求体的大小，防止大包打爆内存
# CCLOAD_MAX_BODY_BYTES=2097152

# ========================================
# Redis 同步配置（可选）
# ========================================

# Redis 连接 URL（可选，用于渠道数据同步备份）
# 格式: redis://localhost:6379 或 redis://user:password@localhost:6379/0
# 启用内存数据库模式时强烈推荐配置，用于故障恢复
# REDIS_URL=redis://localhost:6379

# ========================================
# 运行模式配置
# ========================================

# Gin 运行模式（可选，默认: release）
# 生产环境建议设置为 release
# GIN_MODE=release

# ========================================
# 系统配置（已迁移到 Web 管理界面）
# ========================================
# 以下配置项已迁移到数据库，通过 Web 界面管理，支持热重载：
# - 日志保留天数 (log_retention_days)
# - 单渠道最大Key重试次数 (max_key_retries)
# - 上游首字节超时 (upstream_first_byte_timeout)
# - 88code免费套餐限制 (88code_free_only)
# - TLS证书验证 (skip_tls_verify)
#
# 访问 http://localhost:8080/web/settings.html 进行配置管理
